<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>警务系统浏览器</title>
    <!-- 外部资源引入 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <!-- Tailwind 配置 - 应用新配色 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4a8c2d',     // 绿色作为主色
                        secondary: '#7fbf5a',    // 浅绿色
                        accent: '#4a8c2d',       // 同主色
                        success: '#4a8c2d',
                        warning: '#f59e0b',
                        danger: '#ef4444',
                        dark: '#111111',          // 黑色
                        'dark-secondary': '#333333',
                        light: '#f1efe8',         // 米纸色背景
                        'light-secondary': '#e5e2d9',
                        gray: {
                            50: '#f9fafb',
                            100: '#f3f4f6',
                            200: '#e5e7eb',
                            300: '#d1d5db',
                            400: '#9ca3af',
                            500: '#6b7280',
                            600: '#4b5563',
                            700: '#374151',
                            800: '#1f2937',
                            900: '#111111',
                        }
                    },
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', '"SF Pro Text"', '"Source Han Sans"', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'Cascadia Code', 'monospace'],
                    },
                    spacing: {
                        '18': '4.5rem',
                        '22': '5.5rem',
                        '30': '7.5rem',
                    },
                    letterSpacing: {
                        'tightest': '-0.05em',
                        'tight': '-0.025em',
                        'wide': '0.05em',
                        'wider': '0.1em',
                        'widest': '0.12em',
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'fade-in': 'fadeIn 0.3s ease-out',
                        'slide-up': 'slideUp 0.4s ease-out',
                        'slide-down': 'slideDown 0.3s ease-out',
                        'blink': 'blink 1.5s infinite',
                        'float': 'float 3s ease-in-out infinite',
                        'shimmer': 'shimmer 2s infinite linear',
                        'gradient': 'gradient 3s ease infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(-8px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        slideDown: {
                            '0%': { transform: 'translateY(-20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        blink: {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '0.4' }
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-6px)' }
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-200% center' },
                            '100%': { backgroundPosition: '200% center' }
                        },
                        gradient: {
                            '0%, 100%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' }
                        }
                    },
                    boxShadow: {
                        'glass': '0 8px 32px rgba(0, 0, 0, 0.1)',
                        'card': '0 4px 20px rgba(0, 0, 0, 0.08)',
                        'tab': '0 -2px 10px rgba(0, 0, 0, 0.05)',
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer base {
            * {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
            
            body {
                background-color: #f1efe8;
            }
        }
        
        @layer utilities {
            /* 玻璃态效果 - 调整为白色背景加黑色边框 */
            .glass {
                background: #ffffff;
                border: 1px solid #111111;
            }
            
            .glass-dark {
                background: #111111;
                border: 1px solid #111111;
                color: white;
            }
            
            /* 渐变文本 */
            .gradient-text {
                background: linear-gradient(135deg, #4a8c2d 0%, #7fbf5a 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            /* 卡片悬停效果 */
            .hover-card {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                border: 1px solid #111111;
            }
            
            .hover-card:hover {
                transform: translateY(-4px);
                box-shadow: theme('boxShadow.card');
            }
            
            /* 标签页动画 */
            .tab-slide {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            /* 输入框聚焦效果 */
            .focus-ring:focus {
                outline: none;
                border-color: #4a8c2d;
                box-shadow: 0 0 0 1px #4a8c2d;
            }
            
            /* 进度条动画 */
            .progress-bar {
                animation: progressAnimation 2s ease-out forwards;
            }
            
            @keyframes progressAnimation {
                0% { width: 0%; }
                100% { width: 100%; }
            }
            
            /* 扫描线效果 */
            .scanline {
                background: linear-gradient(
                    to bottom,
                    transparent 50%,
                    rgba(74, 140, 45, 0.03) 51%
                );
                background-size: 100% 6px;
            }
            
            /* 滚动条样式 */
            .scrollbar-thin::-webkit-scrollbar {
                width: 4px;
                height: 4px;
            }
            
            .scrollbar-thin::-webkit-scrollbar-track {
                background: rgba(0, 0, 0, 0.05);
                border-radius: 4px;
            }
            
            .scrollbar-thin::-webkit-scrollbar-thumb {
                background: #4a8c2d;
                border-radius: 4px;
            }
            
            /* 状态指示器 */
            .status-indicator {
                width: 8px;
                height: 8px;
                border-radius: 50%;
                animation: pulse 2s infinite;
            }
            
            /* 终端效果 */
            .terminal-cursor {
                display: inline-block;
                width: 8px;
                height: 16px;
                background-color: currentColor;
                margin-left: 2px;
                animation: blink 1s infinite;
                vertical-align: middle;
            }

            /* 左侧绿色强调条 */
            .accent-bar {
                position: relative;
            }
            
            .accent-bar::before {
                content: '';
                position: absolute;
                left: 0;
                top: 0;
                width: 4px;
                height: 100%;
                background-color: #4a8c2d;
            }

            /* 几何装饰容器 */
            .geometric-container {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 0;
            }

            /* 几何元素 */
            .geo-line {
                position: absolute;
                background: rgba(17, 17, 17, 0.05);
            }

            .geo-line.horizontal {
                width: 100%;
                height: 1px;
            }

            .geo-line.vertical {
                width: 1px;
                height: 100%;
            }

            .geo-circle {
                position: absolute;
                border: 1px solid rgba(17, 17, 17, 0.05);
                border-radius: 50%;
                width: 20px;
                height: 20px;
            }

            .geo-square {
                position: absolute;
                border: 1px solid rgba(17, 17, 17, 0.05);
                width: 16px;
                height: 16px;
            }

            /* 文档项样式 */
            .doc-item-custom {
                background: #111111;
                color: white;
                padding: 10px 14px;
                font-size: 13px;
                cursor: pointer;
                border: 1px solid #111111;
                transition: all 0.2s;
                position: relative;
                overflow: hidden;
                letter-spacing: 0.05em;
            }

            .doc-item-custom::before {
                content: '';
                position: absolute;
                left: 0;
                top: 0;
                width: 4px;
                height: 100%;
                background: #4a8c2d;
                transform: translateX(-100%);
                transition: transform 0.3s;
            }

            .doc-item-custom:hover {
                transform: translateX(4px);
            }

            .doc-item-custom:hover::before {
                transform: translateX(0);
            }

            .doc-item-custom.active {
                background: #4a8c2d;
                color: #111111;
                border-color: #4a8c2d;
            }

            /* 搜索区域样式 - 放大版本 */
            .search-area-custom-large {
                background: white;
                padding: 24px 28px;
                display: flex;
                align-items: center;
                gap: 20px;
                border: 1px solid #111111;
                position: relative;
            }

            .search-area-custom-large::before {
                content: '';
                position: absolute;
                left: 0;
                top: 0;
                width: 4px;
                height: 100%;
                background: #4a8c2d;
            }

            .search-label-custom {
                font-size: 14px;
                letter-spacing: 0.12em;
                color: #777777;
                display: flex;
                align-items: center;
                gap: 8px;
                white-space: nowrap;
            }

            .search-label-custom::before {
                content: '◼';
                color: #4a8c2d;
                font-size: 10px;
            }

            .search-input-custom-large {
                background: transparent;
                border: none;
                border-bottom: 2px solid #111111;
                padding: 10px 0;
                font-size: 18px;
                outline: none;
                flex: 1;
                transition: border-color 0.2s;
            }

            .search-input-custom-large:focus {
                border-bottom-color: #4a8c2d;
            }

            .search-hint-custom {
                font-size: 13px;
                color: #777777;
                letter-spacing: 0.05em;
                white-space: nowrap;
            }

            /* 标题样式 */
            .title-custom {
                font-size: 22px;
                letter-spacing: 0.1em;
                position: relative;
                padding-left: 16px;
            }

            .title-custom::before {
                content: '';
                position: absolute;
                left: 0;
                top: 0;
                width: 6px;
                height: 100%;
                background: #4a8c2d;
            }

            .title-sub-custom {
                display: block;
                font-size: 12px;
                color: #777777;
                margin-top: 4px;
            }

            /* 边框样式 */
            .border-black-custom {
                border: 1px solid #111111;
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { backgroundPosition: 200% center; }
        }

        .tab-content {
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .tab-content.active {
            opacity: 1;
            transform: translateY(0);
        }

        .terminal-line {
            opacity: 0;
            transform: translateY(10px);
            animation: terminalFadeIn 0.5s forwards;
        }
        @keyframes terminalFadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .system-text {
            font-family: 'Courier New', monospace;
        }

        /* 地址栏样式 - 单行显示 */
        .address-bar-container {
            flex: 1;
            background: #ffffff;
            border: 1px solid #111111;
            border-radius: 4px;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .address-bar-display {
            flex: 1;
            font-size: 13px;
            color: #333333;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            user-select: none;
        }

        .address-bar-protocol {
            color: #4a8c2d;
            font-size: 12px;
            font-weight: 500;
        }

        .address-bar-icon {
            color: #4a8c2d;
            font-size: 12px;
        }
    </style>
</head>
<body class="bg-[#f1efe8] min-h-screen font-sans text-[#111111] overflow-x-hidden relative">

    <!-- 几何装饰背景 -->
    <div class="geometric-container">
        <div class="geo-line horizontal" style="top: 20%;"></div>
        <div class="geo-line horizontal" style="top: 50%;"></div>
        <div class="geo-line horizontal" style="top: 80%;"></div>
        <div class="geo-line vertical" style="left: 15%;"></div>
        <div class="geo-line vertical" style="left: 40%;"></div>
        <div class="geo-line vertical" style="left: 65%;"></div>
        <div class="geo-line vertical" style="left: 90%;"></div>
        <div class="geo-circle" style="top: 10%; left: 10%;"></div>
        <div class="geo-circle" style="top: 30%; left: 85%;"></div>
        <div class="geo-circle" style="top: 70%; left: 20%;"></div>
        <div class="geo-circle" style="top: 90%; left: 75%;"></div>
        <div class="geo-square" style="top: 15%; left: 45%;"></div>
        <div class="geo-square" style="top: 45%; left: 60%;"></div>
        <div class="geo-square" style="top: 75%; left: 30%;"></div>
        <div class="geo-square" style="top: 85%; left: 95%;"></div>
    </div>
    
    <!-- 浏览器窗口容器 -->
    <div class="min-h-screen flex flex-col relative z-10">
        <!-- 紧凑的标签页栏 - 应用新样式 -->
        <div class="glass border border-[#111111] px-2 py-1.5 flex items-center justify-between z-10" id="tabs-container">
            <div class="flex items-center space-x-1 flex-1 overflow-x-auto scrollbar-thin">
                <!-- 浏览器主页标签 -->
                <div class="flex items-center space-x-2 px-3 py-1.5 rounded-lg bg-white border border-[#111111] cursor-pointer tab-slide hover-card min-w-max tab-active group" data-tab="browser-home">
                    <div class="w-4 h-4 rounded-full bg-[#4a8c2d] flex items-center justify-center text-white text-xs transition-transform group-hover:scale-110">
                        <i class="fa fa-home"></i>
                    </div>
                    <span class="text-sm font-medium text-[#111111]">主页</span>
                    <button class="ml-1.5 text-gray-400 hover:text-gray-600 text-xs w-4 h-4 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors opacity-0 group-hover:opacity-100" onclick="closeTab(this)">×</button>
                </div>
                
                <!-- 新建标签页按钮 -->
                <div class="flex items-center justify-center w-7 h-7 rounded-lg hover:bg-gray-100 cursor-pointer text-gray-500 hover:text-[#4a8c2d] transition-colors ml-1 border border-[#111111]" id="new-tab-btn" title="新建标签页">
                    <i class="fa fa-plus text-sm"></i>
                </div>
            </div>
            
            <!-- 窗口控制按钮 -->
            <div class="flex items-center space-x-1 ml-2">
                <button class="w-6 h-6 flex items-center justify-center rounded text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors" title="最小化">
                    <i class="fa fa-minus text-xs"></i>
                </button>
                <button class="w-6 h-6 flex items-center justify-center rounded text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors" title="最大化">
                    <i class="fa fa-square-o text-xs"></i>
                </button>
                <button class="w-6 h-6 flex items-center justify-center rounded text-red-500 hover:text-red-600 hover:bg-red-50 transition-colors" title="关闭">
                    <i class="fa fa-times text-xs"></i>
                </button>
            </div>
        </div>
        
        <!-- 紧凑的地址栏 - 单行显示样式 -->
        <div class="glass border border-[#111111] border-t-0 px-3 py-2 flex items-center z-10">
            <div class="flex items-center space-x-2 flex-1 max-w-4xl mx-auto">
                <!-- 导航按钮 -->
                <div class="flex items-center space-x-1">
                    <button class="w-7 h-7 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-600 transition-colors border border-[#111111]" title="后退">
                        <i class="fa fa-chevron-left text-sm"></i>
                    </button>
                    <button class="w-7 h-7 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-600 transition-colors border border-[#111111]" title="前进">
                        <i class="fa fa-chevron-right text-sm"></i>
                    </button>
                    <button class="w-7 h-7 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-600 transition-colors border border-[#111111]" onclick="refreshCurrentTab()" title="刷新">
                        <i class="fa fa-refresh text-sm"></i>
                    </button>
                </div>
                
                <!-- 地址栏 - 单行显示（模拟真实浏览器） -->
                <div class="address-bar-container" id="address-bar-container">
                    <i class="fa fa-lock address-bar-icon"></i>
                    <span class="address-bar-protocol">https://</span>
                    <div class="address-bar-display" id="address-bar-display">police.ft.gov.cn/internal-system/browser</div>
                </div>
                
                <!-- 快捷操作按钮 -->
                <div class="flex items-center space-x-1">
                    <button class="w-7 h-7 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-600 transition-colors border border-[#111111]" title="书签">
                        <i class="fa fa-star-o text-sm"></i>
                    </button>
                    <button class="w-7 h-7 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-600 transition-colors border border-[#111111]" title="扩展">
                        <i class="fa fa-puzzle-piece text-sm"></i>
                    </button>
                    <button class="w-7 h-7 flex items-center justify-center rounded-lg hover:bg-gray-100 text-gray-600 transition-colors border border-[#111111]" title="菜单">
                        <i class="fa fa-ellipsis-h text-sm"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 内容区域 - 所有标签页内容在这里 -->
        <div class="flex-1 overflow-hidden" id="tab-content-container">
            <!-- 浏览器主页内容 -->
            <div id="browser-home" class="tab-content active h-full">
                <div class="h-full flex flex-col items-center justify-center p-6 bg-[#f1efe8]">
                    <!-- 时间和问候 -->
                    <div class="text-center mb-8 animate-fade-in">
                        <div class="text-5xl font-bold text-[#111111] mb-2" data-time-element>09:00</div>
                        <div class="text-lg text-gray-600 mb-6" data-date-element>2026年1月4日 星期六</div>
                        <div class="text-xl font-medium text-[#111111]">早上好，苞米</div>
                    </div>
                    
                    <!-- 主搜索框 - 放大版本 -->
                    <div class="w-full max-w-3xl animate-slide-up">
                        <div class="relative group search-area-custom-large py-0 px-6">
                            <div class="search-label-custom">SEARCH</div>
                            <div class="search-input-container flex-1 flex items-center">
                                <input type="text" data-search-input class="search-input-custom-large" placeholder="搜索案件、系统功能或网址...">
                                <button class="bg-[#4a8c2d] text-white px-8 py-2.5 rounded-lg hover:bg-[#7fbf5a] transition-colors shadow-md focus-ring text-lg" onclick="handleMainSearch()">
                                    <i class="fa fa-search mr-2"></i>搜索
                                </button>
                            </div>
                        </div>
                        
                        <!-- 快捷搜索建议（保持不变：警务综合系统、工作邮箱） -->
                        <div class="flex flex-wrap gap-3 justify-center mt-6">
                            <button class="px-4 py-2 bg-[#4a8c2d] bg-opacity-10 hover:bg-opacity-20 text-[#4a8c2d] rounded-lg text-base transition-colors border border-[#111111]" onclick="quickSearch('警务综合系统')">
                                <i class="fa fa-shield mr-1"></i>警务综合系统
                            </button>
                            <button class="px-4 py-2 bg-[#4a8c2d] bg-opacity-10 hover:bg-opacity-20 text-[#4a8c2d] rounded-lg text-base transition-colors border border-[#111111]" onclick="quickSearch('工作邮箱')">
                                <i class="fa fa-envelope mr-1"></i>工作邮箱
                            </button>
                        </div>
                    </div>
                    
                    <!-- 快速访问卡片 -->
                    <div class="w-full max-w-4xl mt-12">
                        <h3 class="text-lg font-semibold text-[#111111] mb-4 tracking-wider">快速访问</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <!-- 修改：省新闻数据库卡片，点击后新标签页跳转 search.html -->
                            <div class="bg-white rounded-xl p-6 border border-[#111111] hover-card cursor-pointer" onclick="openInNewTab('search1.html')">
                                <div class="w-12 h-12 rounded-lg bg-[#4a8c2d] flex items-center justify-center text-white mb-4 text-xl">
                                    <i class="fa fa-newspaper-o"></i>  <!-- 新闻图标 -->
                                </div>
                                <div class="font-medium text-[#111111] text-lg">省新闻数据库</div>
                                <div class="text-sm text-gray-600 mt-1">全省新闻资讯</div>
                            </div>
                            
                            <!-- 工作邮箱卡片保持不变，新标签页跳转 -->
                            <div class="bg-white rounded-xl p-6 border border-[#111111] hover-card cursor-pointer" onclick="openInNewTab('outlook-welcome.html')">
                                <div class="w-12 h-12 rounded-lg bg-[#4a8c2d] flex items-center justify-center text-white mb-4 text-xl">
                                    <i class="fa fa-envelope"></i>
                                </div>
                                <div class="font-medium text-[#111111] text-lg">工作邮箱</div>
                                <div class="text-sm text-gray-600 mt-1">内部邮件系统</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 警务综合系统内容 (保持不变，仍然是系统内部标签页) -->
            <div id="police-system" class="tab-content hidden h-full bg-[#f1efe8]">
                <div class="relative min-h-screen flex items-center justify-center p-4 z-10">
                    <!-- 带有警徽的标题 - 应用新样式 -->
                    <div class="absolute top-4 left-4 z-20 flex items-center">
                        <div class="w-10 h-10 rounded-full bg-[#4a8c2d] flex items-center justify-center text-white font-bold text-lg mr-3">
                            警
                        </div>
                        <h1 class="text-xl font-bold text-[#111111] hidden md:block title-custom">警务综合信息系统</h1>
                    </div>
                    
                    <!-- 当前时间 -->
                    <div class="absolute top-4 right-4 z-20 text-[#111111] text-sm">
                        <div id="police-date" class="text-right"></div>
                        <div id="police-time" class="font-semibold"></div>
                    </div>
                    
                    <!-- 主要内容 -->
                    <div class="w-full max-w-5xl">
                        <!-- 标题部分 -->
                        <div class="text-center mb-12">
                            <h1 class="text-4xl font-bold text-[#111111] mb-4">警务综合信息系统</h1>
                            <p class="text-xl text-gray-600">POLICE INTEGRATED INFORMATION SYSTEM</p>
                        </div>
                        
                        <!-- 终端容器 -->
                        <div class="bg-white rounded-xl border border-[#111111] overflow-hidden mb-8">
                            <!-- 终端标题 -->
                            <div class="bg-gray-50 border-b border-[#111111] py-4 px-6">
                                <div class="flex items-center">
                                    <h2 class="text-lg font-semibold text-[#111111]">南山市天路分局 - 系统访问终端</h2>
                                </div>
                            </div>
                            
                            <!-- 终端内容 -->
                            <div class="p-6">
                                <div id="terminal-content" class="system-text text-[#111111] space-y-3 min-h-[300px]">
                                    <!-- 终端内容将通过JavaScript添加 -->
                                </div>
                                
                                <!-- 登录容器 -->
                                <div id="login-container" class="mt-8 text-center hidden">
                                    <div id="login-line" class="system-text text-[#111111] mb-4"></div>
                                    <button id="login-btn" class="bg-[#4a8c2d] text-white px-8 py-3 rounded-lg font-medium hover:bg-[#7fbf5a] transition-colors transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-[#4a8c2d] focus:ring-offset-2 shadow-sm border border-[#111111]">
                                        【登录系统】
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 系统状态卡片 -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="bg-white rounded-xl p-6 border border-[#111111] shadow-sm hover-card">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-semibold text-[#111111]">在线警员</h3>
                                    <div class="w-10 h-10 rounded-lg bg-[#4a8c2d] bg-opacity-10 flex items-center justify-center text-[#4a8c2d]">
                                        <i class="fa fa-user-shield"></i>
                                    </div>
                                </div>
                                <div class="text-3xl font-bold text-[#111111] mb-2" id="online-count">127</div>
                                <div class="text-sm text-[#4a8c2d]">
                                    <i class="fa fa-arrow-up"></i> +12 较昨日
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-xl p-6 border border-[#111111] shadow-sm hover-card">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-semibold text-[#111111]">待处理案件</h3>
                                    <div class="w-10 h-10 rounded-lg bg-yellow-50 flex items-center justify-center text-yellow-600">
                                        <i class="fa fa-briefcase"></i>
                                    </div>
                                </div>
                                <div class="text-3xl font-bold text-[#111111] mb-2">23</div>
                                <div class="text-sm text-red-600">
                                    <i class="fa fa-arrow-up"></i> +3 较昨日
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-xl p-6 border border-[#111111] shadow-sm hover-card">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-semibold text-[#111111]">系统负载</h3>
                                    <div class="w-10 h-10 rounded-lg bg-purple-50 flex items-center justify-center text-purple-600">
                                        <i class="fa fa-server"></i>
                                    </div>
                                </div>
                                <div class="text-3xl font-bold text-[#111111] mb-2">18%</div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                    <div class="bg-[#4a8c2d] h-2 rounded-full progress-bar"></div>
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-xl p-6 border border-[#111111] shadow-sm hover-card">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-semibold text-[#111111]">数据库状态</h3>
                                    <div class="w-10 h-10 rounded-lg bg-[#4a8c2d] bg-opacity-10 flex items-center justify-center text-[#4a8c2d]">
                                        <i class="fa fa-database"></i>
                                    </div>
                                </div>
                                <div class="text-3xl font-bold text-[#4a8c2d] mb-2">正常</div>
                                <div class="text-sm text-gray-600">
                                    最后备份: <span id="last-backup"></span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 页脚 -->
                        <div class="text-center text-gray-600 text-sm">
                            <p>南山市天路分局内部系统 | 访问级别：内部网络 | 版本：v3.8.2</p>
                            <p class="mt-2">© 2026 南山市天路分局 版权所有</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 状态栏 -->
        <div class="glass border border-[#111111] border-t-0 px-3 py-2">
            <div class="flex items-center justify-between text-sm">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="status-indicator bg-[#4a8c2d]"></div>
                        <span class="text-[#111111]">连接正常</span>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div id="footer-time" class="font-medium text-[#111111]"></div>
                    <div class="text-gray-500">
                        © 2026 浏览器 v1.0
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 加载覆盖层 -->
    <div id="loading-overlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-8 max-w-md w-full text-center border border-[#111111]">
            <div class="mb-6">
                <div class="w-16 h-16 rounded-full bg-[#4a8c2d] bg-opacity-10 flex items-center justify-center mx-auto">
                    <div class="loading-dots flex space-x-1">
                        <span class="w-3 h-3 rounded-full bg-[#4a8c2d]"></span>
                        <span class="w-3 h-3 rounded-full bg-[#4a8c2d]"></span>
                        <span class="w-3 h-3 rounded-full bg-[#4a8c2d]"></span>
                    </div>
                </div>
            </div>
            <h3 class="text-xl font-bold text-[#111111] mb-2">正在加载系统</h3>
            <p id="loading-text" class="text-gray-600 mb-4">请稍候...</p>
            <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
                <div id="loading-progress" class="bg-[#4a8c2d] h-2 rounded-full" style="width: 0%"></div>
            </div>
            <p class="text-sm text-gray-500">正在连接服务器...</p>
        </div>
    </div>

    <!-- 搜索跳转提示弹窗 -->
    <div id="search-redirect-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-lg p-8 max-w-md w-full animate-slide-up border border-[#111111]">
            <div class="text-center">
                <div class="w-16 h-16 rounded-full bg-[#4a8c2d] bg-opacity-10 flex items-center justify-center mx-auto mb-4">
                    <i class="fa fa-check-circle text-3xl text-[#4a8c2d]"></i>
                </div>
                <h2 class="text-2xl font-bold text-[#111111] mb-2">找到相关结果</h2>
                <p class="text-gray-600 mb-6">正在为您跳转到相关页面...</p>
                <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
                    <div id="redirect-progress" class="bg-[#4a8c2d] h-2 rounded-full" style="width: 0%"></div>
                </div>
                <p id="redirect-target" class="text-sm text-gray-500"></p>
            </div>
        </div>
    </div>

    <!-- 警务综合系统登录弹窗 -->
    <div id="police-login-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-lg p-8 max-w-md w-full animate-slide-up border border-[#111111]">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-[#111111]">警务综合系统登录</h2>
                <button class="text-gray-500 hover:text-gray-700 transition-colors" onclick="closePoliceLoginForm()">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            <form id="police-login-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">用户名（姓名汉字）</label>
                    <input type="text" name="username" class="w-full px-4 py-2 border border-[#111111] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4a8c2d] focus:border-[#4a8c2d] transition-all" placeholder="请输入姓名">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">密码</label>
                    <input type="password" name="password" class="w-full px-4 py-2 border border-[#111111] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4a8c2d] focus:border-[#4a8c2d] transition-all" placeholder="请输入密码">
                </div>
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <input type="checkbox" id="remember-police" class="w-4 h-4 text-[#4a8c2d] focus:ring-[#4a8c2d] border-gray-300 rounded">
                        <label for="remember-police" class="ml-2 block text-sm text-gray-600">记住密码</label>
                    </div>
                    <a href="#" class="text-sm text-[#4a8c2d] hover:text-[#7fbf5a] transition-colors">忘记密码?</a>
                </div>
                <div id="police-login-error" class="text-red-500 text-sm hidden"></div>
                <button type="submit" class="w-full py-2 bg-[#4a8c2d] text-white rounded-lg hover:bg-[#7fbf5a] transition-colors shadow-md focus:outline-none focus:ring-2 focus:ring-[#4a8c2d] border border-[#111111]">
                    <i class="fa fa-sign-in mr-2"></i>登录系统
                </button>
            </form>
            <div class="mt-6 text-center text-sm text-gray-500">
                <p>© 2026 南山市天路分局 版权所有</p>
            </div>
        </div>
    </div>

    <script>
        // DOM 元素
        const loadingOverlay = document.getElementById('loading-overlay');
        const loadingProgress = document.getElementById('loading-progress');
        const loadingText = document.getElementById('loading-text');
        const currentTimeEl = document.getElementById('footer-time');
        const addressBarDisplay = document.getElementById('address-bar-display');
        const tabsContainer = document.getElementById('tabs-container');
        const newTabBtn = document.getElementById('new-tab-btn');
        const tabContentContainer = document.getElementById('tab-content-container');
        const searchRedirectModal = document.getElementById('search-redirect-modal');
        const redirectProgress = document.getElementById('redirect-progress');
        const redirectTarget = document.getElementById('redirect-target');
        
        // 标签页相关元素
        let tabs = document.querySelectorAll('[data-tab]');
        let currentTab = 'browser-home';
        
        // 地址栏URL映射
        const addressBarUrls = {
            'browser-home': 'police.ft.gov.cn/internal-system/browser',
            'police-system': 'police.ft.gov.cn/integrated-system/v3.8.2',
            'work-email': 'outmail.ft.gov.cn/login'
        };
        
        // 系统映射配置（保留，用于搜索跳转）
        const systemConfig = {
            '警务综合系统': {
                id: 'police-system',
                icon: 'fa-shield',
                color: 'bg-[#4a8c2d]',
                name: '警务综合系统'
            },
            '浏览器主页': {
                id: 'browser-home',
                icon: 'fa-home',
                color: 'bg-[#4a8c2d]',
                name: '浏览器主页'
            }
        };
        
        // 搜索关键词跳转映射（所有跳转改为新标签页）
        const searchRedirectMap = {
            '南山市晨间新闻': { url: 'search1.html', name: '南山市晨间新闻' },
            'SBTP': { url: 'SBTP.html', name: 'SBTP系统' },
            'TWO SECONDS': { url: 'two-seconds.html', name: 'TWO SECONDS时尚网站' },
            '监控': { url: 'jiankong.html', name: '多通道监控图像重组系统' },
            '提示': { url: 'mail1.html', name: '工作邮箱中有攻略' },
            'GTIN-12': { url: 'tech.html', name: '南山康泰医疗科技有限公司' },
            '南山市': { url: '建筑.html', name: '恭喜你发现了未完成版的南山市地图建模！' },
            '云盘': { url: 'share.html', name: '安全云盘' },
            'GPS': { url: 'mail1.html', name: '请在工作邮箱中进行申请哦' }
        };
        
        // 初始化函数
        function init() {
            updateDateTime();
            setInterval(updateDateTime, 1000);
            
            // 绑定事件
            document.querySelectorAll('[data-search-input]').forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') handleMainSearch();
                });
            });
            
            // 绑定新建标签页按钮事件（只绑定一次）
            newTabBtn.addEventListener('click', addNewHomeTab);
            
            setupTabs();
        }
        
        // 设置标签页功能
        function setupTabs() {
            tabs = document.querySelectorAll('[data-tab]');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // 移除所有标签页的活跃状态
                    tabs.forEach(t => {
                        t.classList.remove('tab-active', 'bg-white', 'border', 'border-[#111111]');
                        t.classList.add('bg-gray-50');
                    });
                    
                    // 为当前点击的标签页添加活跃状态
                    tab.classList.add('tab-active', 'bg-white', 'border', 'border-[#111111]');
                    tab.classList.remove('bg-gray-50');
                    
                    // 获取标签页对应的内容ID
                    const tabId = tab.dataset.tab;
                    currentTab = tabId;
                    
                    // 更新地址栏显示
                    updateAddressBar(tabId);
                    
                    // 隐藏所有内容区域
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                        content.classList.add('hidden');
                    });
                    
                    // 显示当前标签页对应的内容区域
                    const activeContent = document.getElementById(tabId);
                    if (activeContent) {
                        activeContent.classList.remove('hidden');
                        activeContent.classList.add('active');
                        
                        // 如果是警务系统且未初始化，进行初始化
                        if (tabId === 'police-system' && !window.policeSystemInitialized) {
                            initPoliceSystem();
                            window.policeSystemInitialized = true;
                        }
                    }
                });
            });
        }
        
        // 更新地址栏显示
        function updateAddressBar(tabId) {
            const url = addressBarUrls[tabId] || addressBarUrls['browser-home'];
            addressBarDisplay.textContent = url;
        }
        
        // 刷新当前标签页
        function refreshCurrentTab() {
            showLoadingOverlay();
            
            // 模拟加载进度
            let progress = 0;
            const interval = setInterval(() => {
                progress += 5;
                loadingProgress.style.width = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        hideLoadingOverlay();
                    }, 500);
                }
            }, 50);
        }
        
        // 关闭标签页
        function closeTab(button) {
            const tabElement = button.closest('[data-tab]');
            const tabId = tabElement.dataset.tab;
            
            // 不能关闭最后一个标签页
            if (document.querySelectorAll('[data-tab]').length <= 1) {
                alert('至少保留一个标签页');
                return;
            }
            
            // 移除标签页元素，但保留内容区域
            tabElement.remove();
            
            // 如果关闭的是当前活跃标签页，切换到第一个标签页
            if (tabId === currentTab) {
                const firstTab = document.querySelector('[data-tab]');
                if (firstTab) {
                    firstTab.click();
                }
            }
        }
        
        // 新增浏览器主页标签页
        function addNewHomeTab() {
            // 生成唯一ID
            const newTabId = 'home-tab-' + Date.now();
            
            // 1. 复制原始浏览器主页容器
            const originalHomeTab = document.getElementById('browser-home');
            const newHomeTabContent = originalHomeTab.cloneNode(true);
            
            // 2. 设置新的ID和状态
            newHomeTabContent.id = newTabId;
            newHomeTabContent.classList.remove('active');
            newHomeTabContent.classList.add('hidden');
            
            // 3. 添加到内容容器中
            tabContentContainer.appendChild(newHomeTabContent);
            
            // 4. 创建对应的标签页元素
            const tabElement = document.createElement('div');
            tabElement.className = 'flex items-center space-x-2 px-3 py-1.5 rounded-lg bg-gray-50 hover:bg-gray-100 cursor-pointer tab-slide hover-card min-w-max group border border-[#111111]';
            tabElement.dataset.tab = newTabId;
            tabElement.innerHTML = `
                <div class="w-4 h-4 rounded-full bg-[#4a8c2d] flex items-center justify-center text-white text-xs transition-transform group-hover:scale-110">
                    <i class="fa fa-home"></i>
                </div>
                <span class="text-sm font-medium text-[#111111]">主页</span>
                <button class="ml-1.5 text-gray-400 hover:text-gray-600 text-xs w-4 h-4 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors opacity-0 group-hover:opacity-100" onclick="closeTab(this)">×</button>
            `;
            
            // 5. 插入到新建标签页按钮前
            newTabBtn.insertAdjacentElement('beforebegin', tabElement);
            
            // 6. 重新设置标签页事件监听
            setupTabs();
            
            // 7. 激活新标签页
            tabElement.click();
            
            // 8. 更新时间显示（确保新标签页有正确的时间）
            updateDateTime();
        }
        
        // 添加系统标签页（用于搜索跳转）——保留原逻辑，点击警务综合系统仍然在当前浏览器标签页打开
        function addSystemTab(systemId) {
            // 检查该标签页是否已存在
            const existingTab = document.querySelector(`[data-tab="${systemId}"]`);
            if (existingTab) {
                existingTab.click(); // 如果已存在，直接切换到该标签页
                return;
            }
            
            // 获取系统配置
            let config = null;
            for (const key in systemConfig) {
                if (systemConfig[key].id === systemId) {
                    config = systemConfig[key];
                    break;
                }
            }
            
            if (!config) return;
            
            // 创建标签页元素
            const tabElement = document.createElement('div');
            tabElement.className = 'flex items-center space-x-2 px-3 py-1.5 rounded-lg bg-gray-50 hover:bg-gray-100 cursor-pointer tab-slide hover-card min-w-max group border border-[#111111]';
            tabElement.dataset.tab = config.id;
            tabElement.innerHTML = `
                <div class="w-4 h-4 rounded-full ${config.color} flex items-center justify-center text-white text-xs transition-transform group-hover:scale-110">
                    <i class="fa ${config.icon}"></i>
                </div>
                <span class="text-sm font-medium text-[#111111]">${config.name}</span>
                <button class="ml-1.5 text-gray-400 hover:text-gray-600 text-xs w-4 h-4 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors opacity-0 group-hover:opacity-100" onclick="closeTab(this)">×</button>
            `;
            
            // 插入到新建标签页按钮前
            newTabBtn.insertAdjacentElement('beforebegin', tabElement);
            
            // 确保标签页内容区域存在
            const contentElement = document.getElementById(config.id);
            if (!contentElement) {
                console.error(`Content element with id "${config.id}" not found!`);
                return;
            }
            
            // 重新设置标签页事件监听
            setupTabs();
            
            // 激活新标签页
            tabElement.click();
        }
        
        // 新标签页打开URL的函数（用于快速访问卡片和外部跳转）
        function openInNewTab(url) {
            // 创建一个隐藏的a标签，设置target="_blank" 模拟新标签页打开
            const link = document.createElement('a');
            link.href = url;
            link.target = '_blank';
            link.rel = 'noopener noreferrer';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // 重写redirectToOutmail，使用新标签页
        function redirectToOutmail() {
            openInNewTab('outlook-welcome.html');
        }
        
        // 显示搜索跳转提示（改为新标签页跳转）
        function showSearchRedirect(url, name) {
            searchRedirectModal.classList.remove('hidden');
            redirectTarget.textContent = `目标页面: ${name} (${url})`;
            redirectProgress.style.width = '0%';
            
            // 模拟跳转进度
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                redirectProgress.style.width = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        // 改为新标签页打开
                        openInNewTab(url);
                        // 隐藏弹窗
                        searchRedirectModal.classList.add('hidden');
                    }, 500);
                }
            }, 100);
        }
        
        // 处理主页搜索功能（支持系统跳转和关键词跳转）
        function handleMainSearch() {
            // 获取当前激活标签页的搜索框值
            let searchTerm = '';
            const activeTabContent = document.querySelector('.tab-content.active');
            const activeSearchInput = activeTabContent ? activeTabContent.querySelector('[data-search-input]') : null;
            
            if (activeSearchInput) {
                searchTerm = activeSearchInput.value.trim();
            }
            
            if (!searchTerm) return;
            
            // 检查是否是系统名称（警务综合系统、浏览器主页等，仍使用内部标签页）
            let targetSystem = null;
            for (const key in systemConfig) {
                if (searchTerm.includes(key) || key.includes(searchTerm)) {
                    targetSystem = systemConfig[key];
                    break;
                }
            }
            
            if (targetSystem) {
                // 如果是系统名称，创建/切换到对应标签页（内部跳转）
                addSystemTab(targetSystem.id);
                
                // 清空所有搜索框
                if (activeSearchInput) activeSearchInput.value = '';
            } else {
                // 检查是否是特定的搜索关键词
                let redirectInfo = null;
                for (const keyword in searchRedirectMap) {
                    if (searchTerm.includes(keyword)) {
                        redirectInfo = searchRedirectMap[keyword];
                        break;
                    }
                }
                
                if (redirectInfo) {
                    // 找到匹配的关键词，显示跳转提示（新标签页）
                    showSearchRedirect(redirectInfo.url, redirectInfo.name);
                    
                    // 清空所有搜索框
                    if (activeSearchInput) activeSearchInput.value = '';
                } else {
                    // 普通搜索，显示无结果提示
                    alert(`未找到与 "${searchTerm}" 相关的系统或页面\n\n可尝试搜索以下关键词：\n案件、档案、户籍、车辆、身份证、报警、巡逻、监控、统计、设置\n\n或搜索：警务综合系统、工作邮箱`);
                    
                    // 清空所有搜索框
                    if (activeSearchInput) activeSearchInput.value = '';
                }
            }
        }
        
        // 快捷搜索函数
        function quickSearch(term) {
            const activeSearchInput = document.querySelector('.tab-content.active [data-search-input]');
            
            if (activeSearchInput) {
                activeSearchInput.value = term;
                activeSearchInput.focus();
            }
            
            // 如果是系统名称，直接跳转（内部标签页或新标签页）
            const systemMap = {
                '警务系统': 'police-system',
                '警务综合系统': 'police-system',   // 对应内部标签页
                '工作邮箱': 'work-email'
            };
            
            if (systemMap[term]) {
                if (term === '工作邮箱') {
                    // 工作邮箱新标签页跳转
                    redirectToOutmail();
                } else {
                    // 警务综合系统内部标签页
                    addSystemTab(systemMap[term]);
                }
            }
        }
        
        // 更新日期和时间显示
        function updateDateTime() {
            const now = new Date();
            
            // 格式化日期: YYYY年MM月DD日 星期X
            const weekDays = ['日', '一', '二', '三', '四', '五', '六'];
            const dateStr = `${now.getFullYear()}年${String(now.getMonth() + 1).padStart(2, '0')}月${String(now.getDate()).padStart(2, '0')}日 星期${weekDays[now.getDay()]}`;
            
            // 固定时间为9:00:SS
            const timeStr = `09:00:${String(now.getSeconds()).padStart(2, '0')}`;
            
            // 固定短时间为9:00
            const shortTimeStr = `09:00`;
            
            // 更新页脚时间
            currentTimeEl.textContent = timeStr;
            
            // 更新所有浏览器主页的时间显示（使用data属性选择器）
            document.querySelectorAll('[data-time-element]').forEach(el => {
                el.textContent = shortTimeStr;
            });
            
            document.querySelectorAll('[data-date-element]').forEach(el => {
                el.textContent = dateStr;
            });
            
            // 更新警务系统页面的时间
            const policeDateEl = document.getElementById('police-date');
            const policeTimeEl = document.getElementById('police-time');
            if (policeDateEl && policeTimeEl) {
                policeDateEl.textContent = dateStr;
                // 警务系统固定小时为09点
                policeTimeEl.textContent = `09:${String(now.getMinutes()).padStart(2, '0')}:${String(now.getSeconds()).padStart(2, '0')}`;
            }
            
            // 更新最后备份时间（如果存在）
            const lastBackupEl = document.getElementById('last-backup');
            if (lastBackupEl && !lastBackupEl.textContent) {
                const yesterday = new Date(now);
                yesterday.setDate(yesterday.getDate() - 1);
                lastBackupEl.textContent = `${yesterday.getMonth() + 1}月${yesterday.getDate()}日 ${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
            }
        }
        
        // 显示加载覆盖层
        function showLoadingOverlay() {
            loadingOverlay.classList.remove('hidden');
            loadingOverlay.classList.add('animate-fade-in');
            loadingProgress.style.width = '0%';
            loadingText.textContent = '加载中...';
        }
        
        // 隐藏加载覆盖层
        function hideLoadingOverlay() {
            loadingOverlay.classList.add('hidden');
        }
        
        // 初始化警务系统 - 加速版（2秒内完成）
        function initPoliceSystem() {
            // 终端消息
            const terminalMessages = [
                ">> 系统启动中...",
                ">> 初始化警务综合信息系统界面...",
                ">> [系统时间: " + getPoliceSystemTime() + "]",
                ">> 检测用户存在性...",
                ">> 用户识别: 警员账号123456",
                ">> 问候语: 您好，xxx警官",
                ">> 系统: 欢迎使用南山市天路分局综合信息系统",
                ">> 说明: 请先登录,登录后可查看案件信息、处理日常工作",
                ">> 等待用户认证..."
            ];
            
            // 获取警务系统时间格式
            function getPoliceSystemTime() {
                const now = new Date();
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, '0');
                const day = String(now.getDate()).padStart(2, '0');
                const second = String(now.getSeconds()).padStart(2, '0');
                return `${year}-${month}-${day} 09:00:${second}`;
            }
            
            // 延迟函数
            function wait(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
            
            // 计算打字参数以在200内完成
            const totalTime = 200; // 200毫秒
            const messageCount = terminalMessages.length;
            const avgTimePerMessage = totalTime / messageCount;
            
            // 终端打字效果 - 加速版
            async function typeTextEffect() {
                const terminalContent = document.getElementById('terminal-content');
                terminalContent.innerHTML = ''; // 清空内容
                
                for (let i = 0; i < terminalMessages.length; i++) {
                    const message = terminalMessages[i];
                    const lineElement = document.createElement('div');
                    lineElement.className = 'terminal-line';
                    lineElement.style.animationDelay = '0s'; // 移除动画延迟，直接显示
                    terminalContent.appendChild(lineElement);
                    
                    // 计算每条消息的打字时间
                    const charCount = message.length;
                    const typingTime = avgTimePerMessage * 0.7; // 70%时间用于打字
                    const charDelay = typingTime / charCount;
                    
                    // 快速逐个字符显示
                    for (let j = 0; j <= message.length; j++) {
                        lineElement.textContent = message.substring(0, j);
                        await wait(Math.max(charDelay, 5)); // 最小5ms，保证流畅
                    }
                    
                    // 行之间的短暂延迟
                    await wait(avgTimePerMessage * 0.3); // 30%时间作为行间延迟
                }
                
                // 显示登录按钮
                const loginContainer = document.getElementById('login-container');
                const loginLine = document.getElementById('login-line');
                loginLine.textContent = ">> 请点击下方按钮进行登录认证...";
                loginContainer.classList.remove('hidden');
            }
            
            // 执行打字效果
            typeTextEffect();
        }

        // 登录验证函数
        function handleLogin(formId) {
            const form = document.getElementById(formId);
            if (!form) return false;
            
            const username = form.querySelector('[name="username"]').value;
            const password = form.querySelector('[name="password"]').value;
            const errorElement = form.querySelector('[id$="-error"]');

            // 验证默认账号密码
            if (username === '张本宇' && password === '19770404') {
                // 登录成功，跳转到story3.html（新标签页）
                openInNewTab('story3.html');
                closePoliceLoginForm(); // 关闭弹窗
                return false;
            } else {
                // 登录失败，显示错误信息
                if (errorElement) {
                    errorElement.textContent = '用户名或密码错误';
                    errorElement.classList.remove('hidden');
                }
                return false;
            }
        }

        // 显示警务综合系统登录表单
        function showPoliceLoginForm() {
            document.getElementById('police-login-modal').classList.remove('hidden');
        }

        // 关闭警务综合系统登录表单
        function closePoliceLoginForm() {
            document.getElementById('police-login-modal').classList.add('hidden');
            // 清空表单
            const form = document.getElementById('police-login-form');
            if (form) form.reset();
            const errorElement = document.getElementById('police-login-error');
            if (errorElement) errorElement.classList.add('hidden');
        }

        // 初始化
        init();
        
        // 绑定所有登录表单的提交事件
        document.addEventListener('DOMContentLoaded', function() {
            // 绑定警务综合系统登录按钮点击事件
            const policeLoginBtn = document.getElementById('login-btn');
            if (policeLoginBtn) {
                policeLoginBtn.addEventListener('click', showPoliceLoginForm);
            }

            // 绑定警务综合系统登录表单提交事件
            const policeLoginForm = document.getElementById('police-login-form');
            if (policeLoginForm) {
                policeLoginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    handleLogin('police-login-form');
                });
            }
        });
    </script>
</body>
</html>