<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SBTP 智慧商旅通系统 - 账号登录终端</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700;900&family=Arial+Black&display=swap" rel="stylesheet">
    <style>
        :root {
            --black: #000000;
            --white: #FFFFFF;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--white);
            color: var(--black);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .font-heavy {
            font-family: 'Noto Sans SC', sans-serif;
            font-weight: 900;
        }
        
        .font-arial-black {
            font-family: 'Arial Black', 'Noto Sans SC', sans-serif;
            font-weight: 900;
        }
        
        /* 硬边缘效果 - 先锋艺术风格 */
        .hard-edge {
            box-shadow: 6px 6px 0px 0px var(--black);
            transition: all 0.2s ease;
        }
        
        .hard-edge:hover {
            box-shadow: 3px 3px 0px 0px var(--black);
            transform: translate(2px, 2px);
        }
        
        .hard-edge:active {
            box-shadow: 0px 0px 0px 0px var(--black);
            transform: translate(4px, 4px);
        }
        
        /* 几何装饰动画 */
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }
        
        .geo-rotate {
            animation: rotate 15s linear infinite;
        }
        
        .geo-pulse {
            animation: pulse 2s ease-in-out infinite;
        }
        
        /* 输入框样式 */
        .brutalist-input {
            border: 3px solid var(--black);
            background: var(--white);
            font-family: 'Noto Sans SC', sans-serif;
            font-weight: 700;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .brutalist-input:focus {
            background: var(--black);
            color: var(--white);
            box-shadow: 0 0 0 3px var(--white), 0 0 0 6px var(--black);
        }
        
        /* 粗分隔线 */
        .thick-line {
            height: 6px;
            background: var(--black);
            border: none;
        }
        
        /* 日志条目动画 */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .log-entry {
            animation: slideIn 0.4s ease forwards;
        }
        
        /* 滚动条样式 */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--white);
            border-left: 3px solid var(--black);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--black);
            border: 2px solid var(--white);
        }
        
        /* 警告闪烁 */
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }
        
        .blink-warning {
            animation: blink 2s ease-in-out infinite;
        }
        
        /* 网格背景纹理 */
        .grid-pattern {
            background-image: 
                linear-gradient(var(--black) 1px, transparent 1px),
                linear-gradient(90deg, var(--black) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.03;
        }
        
        /* 主容器 */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            width: 100%;
        }
        
        @media (min-width: 1920px) {
            .main-container {
                max-width: 1600px;
            }
        }
    </style>
</head>
<body>
    <!-- 顶部导航栏 -->
    <header class="bg-black text-white border-b-4 border-black sticky top-0 z-50">
        <div class="main-container">
            <div class="flex items-center justify-between h-20">
                <!-- Logo区域 -->
                <div class="flex items-center gap-6">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-white geo-rotate"></div>
                        <div class="w-0 h-0 border-l-[10px] border-l-transparent border-r-[10px] border-r-transparent border-b-[18px] border-b-white geo-pulse"></div>
                    </div>
                    <div>
                        <h1 class="font-arial-black text-2xl tracking-tight">SBTP</h1>
                        <p class="text-xs tracking-widest opacity-70">智慧商旅通系统</p>
                    </div>
                </div>
                
                <!-- 中间导航 -->
                <nav class="hidden md:flex items-center gap-8">
                    <div class="h-8 w-px bg-white opacity-30"></div>
                    <span class="font-heavy text-sm tracking-widest">账号登陆终端 v2.5</span>
                    <div class="h-8 w-px bg-white opacity-30"></div>
                    <span class="text-xs tracking-widest opacity-60">南山市政务数据平台</span>
                </nav>
                
                <!-- 右侧几何装饰 -->
                <div class="flex items-center gap-4">
                    <div class="w-6 h-6 rounded-full border-2 border-white"></div>
                    <div class="w-4 h-12 bg-white"></div>
                    <div class="w-8 h-8 border-2 border-white rotate-45"></div>
                </div>
            </div>
        </div>
    </header>

    <!-- 主内容区 -->
    <main class="flex-1 relative">
        <div class="grid-pattern absolute inset-0 pointer-events-none"></div>
        
        <div class="main-container py-12 relative z-10">
            
            <!-- 页面标题区 -->
            <div class="mb-12 border-b-4 border-black pb-8 flex items-end justify-between">
                <div>
                    <h2 class="font-arial-black text-5xl lg:text-6xl mb-4 tracking-tighter">
                        系统登录
                    </h2>
                    <div class="flex items-center gap-4">
                        <div class="h-1 w-24 bg-black"></div>
                        <p class="font-heavy text-lg tracking-widest text-gray-600">
                            SYSTEM AUDIT LOG
                        </p>
                    </div>
                </div>
                
                <!-- 顶部几何装饰 -->
                <div class="flex items-end gap-4 mb-2">
                    <div class="w-12 h-12 border-4 border-black rotate-12"></div>
                    <div class="w-8 h-8 bg-black rounded-full"></div>
                    <div class="w-16 h-4 bg-black"></div>
                </div>
            </div>

            <!-- 双栏布局：左侧登录/新闻，右侧装饰 -->
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8" id="mainGrid">
                
                <!-- 左侧内容区 (8列) -->
                <div class="lg:col-span-8 space-y-8" id="leftContent">
                    
                    <!-- 登录区域 -->
                    <section id="loginSection" class="bg-white border-4 border-black hard-edge relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-black opacity-5 rotate-45 translate-x-16 -translate-y-16"></div>
                        
                        <div class="p-8 lg:p-10">
                            <div class="flex items-center gap-4 mb-8 border-b-2 border-black pb-4">
                                <div class="w-3 h-3 bg-black"></div>
                                <h3 class="font-heavy text-2xl tracking-widest">身份验证</h3>
                                <div class="flex-1 h-px bg-black"></div>
                                <span class="text-xs font-bold opacity-50">SECURE ACCESS</span>
                            </div>

                            <form id="loginForm" class="space-y-6">
                                <!-- ID卡号输入 -->
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-start">
                                    <label class="font-heavy text-sm tracking-wider md:pt-4">
                                        市民ID卡号
                                    </label>
                                    <div class="md:col-span-3 space-y-2">
                                        <input 
                                            type="text" 
                                            id="idCard" 
                                            maxlength="10"
                                            placeholder="0000000000"
                                            class="brutalist-input w-full p-4 text-xl tracking-widest uppercase font-mono"
                                            autocomplete="off"
                                        >
                                        <p class="text-xs font-bold opacity-50 tracking-wider">
                                            请输入10位数字ID卡号 · 南山市市民唯一标识
                                        </p>
                                    </div>
                                </div>

                                <div class="h-px bg-black opacity-20"></div>

                                <!-- 账号名称输入 -->
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-start">
                                    <label class="font-heavy text-sm tracking-wider md:pt-4">
                                        系统账号
                                    </label>
                                    <div class="md:col-span-3 space-y-2">
                                        <input 
                                            type="text" 
                                            id="accountName" 
                                            placeholder="例如：张三.test"
                                            class="brutalist-input w-full p-4 text-lg"
                                            autocomplete="off"
                                        >
                                        <div class="bg-black text-white p-3 inline-block max-w-full">
                                            <p class="text-xs font-bold tracking-wider flex items-center gap-2">
                                                <span class="w-4 h-4 border border-white flex items-center justify-center text-[10px]">i</span>
                                                账号格式：人物姓名全称 + .test / .admin / .guest 后缀
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <!-- 提交按钮 -->
                                <div class="pt-4">
                                    <button 
                                        type="submit" 
                                        class="w-full bg-black text-white font-heavy text-xl py-5 hard-edge hover:bg-white hover:text-black border-4 border-black transition-colors duration-300 tracking-widest flex items-center justify-center gap-3"
                                    >
                                        <span>验证并获取日志</span>
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M9 5l7 7-7 7"/>
                                        </svg>
                                    </button>
                                </div>
                            </form>

                            <!-- 错误提示 -->
                            <div id="errorMsg" class="hidden mt-6 border-l-4 border-black bg-gray-100 p-4 blink-warning">
                                <p class="font-heavy text-center tracking-widest text-sm">
                                    ⚠ 验证失败：ID卡号或账号名称不匹配
                                </p>
                            </div>
                        </div>
                    </section>

                    <!-- 合作新闻区块 -->
                    <section class="border-4 border-black bg-white">
                        <div class="bg-black text-white p-4 flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-2 h-2 bg-white rounded-full"></div>
                                <h3 class="font-heavy text-lg tracking-widest">系统合作动态</h3>
                            </div>
                            <span class="text-xs opacity-70 tracking-wider">NEWS UPDATE</span>
                        </div>
                        
                        <div class="p-6">
                            <article class="group cursor-pointer">
                                <div class="flex items-start justify-between mb-4">
                                    <div class="flex items-center gap-3">
                                        <span class="bg-black text-white text-xs font-bold px-3 py-1 tracking-wider">战略联动</span>
                                        <span class="text-xs font-bold opacity-50">2024-12-18</span>
                                    </div>
                                    <div class="flex gap-1">
                                        <div class="w-2 h-2 bg-black"></div>
                                        <div class="w-2 h-2 bg-black"></div>
                                        <div class="w-2 h-2 bg-black"></div>
                                    </div>
                                </div>
                                
                                <h4 class="font-heavy text-2xl mb-3 group-hover:translate-x-2 transition-transform duration-300 border-l-4 border-black pl-4">
                                    TWO SECONDS × SBTP 系统数据联动
                                </h4>
                                
                                <p class="text-sm leading-relaxed mb-4 text-gray-700 max-w-3xl">
                                    基于SBTP系统商务旅客行为数据分析，TWO SECONDS时尚品牌已达成深度战略合作。通过系统API接口实时获取商务旅客的行程数据、消费偏好及场景需求，为金融、互联网、审计等高端商务人群提供精准的商旅场景服饰推荐服务。本次合作覆盖南山市120万注册用户，实现出行数据与消费场景的无缝算法匹配。
                                </p>
                                
                                <div class="flex gap-3 pt-4 border-t-2 border-black">
                                    <span class="text-xs border-2 border-black px-3 py-1 font-bold">智慧商旅</span>
                                    <span class="text-xs border-2 border-black px-3 py-1 font-bold">数据互通</span>
                                    <span class="text-xs border-2 border-black px-3 py-1 font-bold">用户画像</span>
                                    <span class="text-xs border-2 border-black px-3 py-1 font-bold">会展经济</span>
                                </div>
                            </article>
                        </div>
                    </section>

                    <!-- 快速提示 -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="border-2 border-black p-4 bg-white">
                            <div class="font-heavy text-sm mb-2">测试账号</div>
                            <div class="text-xs font-mono opacity-70">2004040404</div>
                            <div class="text-xs font-mono">张三.test</div>
                        </div>
                        <div class="border-2 border-black p-4 bg-white">
                            <div class="font-heavy text-sm mb-2">管理员账号</div>
                            <div class="text-xs font-mono opacity-70">1234567890</div>
                            <div class="text-xs font-mono">王五.admin</div>
                        </div>
                        <div class="border-2 border-black p-4 bg-white">
                            <div class="font-heavy text-sm mb-2">访客账号</div>
                            <div class="text-xs font-mono opacity-70">9876543210</div>
                            <div class="text-xs font-mono">李四.guest</div>
                        </div>
                    </div>
                </div>

                <!-- 右侧装饰区 (4列) -->
                <div class="lg:col-span-4 space-y-6" id="rightContent">
                    <!-- 几何艺术装饰 -->
                    <div class="border-4 border-black bg-white p-8 aspect-square flex items-center justify-center relative overflow-hidden">
                        <div class="absolute inset-0 grid-pattern opacity-20"></div>
                        <div class="relative z-10 w-full h-full flex items-center justify-center">
                            <div class="w-32 h-32 border-8 border-black rotate-45 geo-rotate absolute"></div>
                            <div class="w-24 h-24 bg-black geo-pulse absolute"></div>
                            <div class="w-16 h-16 border-4 border-white rotate-12 absolute"></div>
                        </div>
                    </div>

                    <!-- 系统状态 -->
                    <div class="border-4 border-black bg-black text-white p-6">
                        <h4 class="font-heavy text-lg mb-4 tracking-widest">系统状态</h4>
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between border-b border-white border-opacity-20 pb-2">
                                <span class="opacity-70">SBTP节点</span>
                                <span class="font-bold">12个活跃</span>
                            </div>
                            <div class="flex justify-between border-b border-white border-opacity-20 pb-2">
                                <span class="opacity-70">数据互通</span>
                                <span class="font-bold">正常</span>
                            </div>
                            <div class="flex justify-between border-b border-white border-opacity-20 pb-2">
                                <span class="opacity-70">安全等级</span>
                                <span class="font-bold text-yellow-400">等保三级</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="opacity-70">测试账号</span>
                                <span class="font-bold text-red-400">待清理</span>
                            </div>
                        </div>
                    </div>

                    <!-- 竖排文字装饰 -->
                    <div class="border-4 border-black bg-white p-6 flex items-center justify-center h-64">
                        <div class="writing-vertical text-4xl font-heavy tracking-widest" style="writing-mode: vertical-rl; text-orientation: upright;">
                            数据即真相
                        </div>
                    </div>

                </div>
            </div>

            <!-- 日志展示区域（初始隐藏） -->
            <section id="logSection" class="hidden mt-8">
                <div class="bg-white border-4 border-black hard-edge">
                    
                    <!-- 日志头部 -->
                    <div class="bg-black text-white p-6 flex flex-col lg:flex-row lg:items-center justify-between gap-4">
                        <div>
                            <h3 class="font-heavy text-2xl tracking-widest mb-1">系统操作日志</h3>
                            <p class="text-sm opacity-70 font-mono">ACCOUNT: <span id="displayAccount" class="text-yellow-400"></span></p>
                        </div>
                        
                        <div class="flex items-center gap-6">
                            <div class="text-right">
                                <div class="text-3xl font-arial-black" id="currentTime">00:00</div>
                                <div class="text-xs tracking-widest opacity-70">实时监控中</div>
                            </div>
                            <div class="w-12 h-12 border-2 border-white rounded-full flex items-center justify-center geo-rotate">
                                <div class="w-2 h-2 bg-white rounded-full"></div>
                            </div>
                        </div>
                    </div>

                    <!-- 过滤器 -->
                    <div class="border-b-4 border-black p-4 bg-gray-50 flex flex-wrap gap-3">
                        <button class="filter-btn active px-6 py-2 border-2 border-black bg-black text-white font-bold text-sm hard-edge transition-all" data-filter="all">
                            全部记录
                        </button>
                        <button class="filter-btn px-6 py-2 border-2 border-black bg-white font-bold text-sm hard-edge hover:bg-black hover:text-white transition-all" data-filter="query">
                            数据查询
                        </button>
                        <button class="filter-btn px-6 py-2 border-2 border-black bg-white font-bold text-sm hard-edge hover:bg-black hover:text-white transition-all" data-filter="modify">
                            系统修改
                        </button>
                        <button class="filter-btn px-6 py-2 border-2 border-black bg-white font-bold text-sm hard-edge hover:bg-black hover:text-white transition-all" data-filter="access">
                            物理接入
                        </button>
                    </div>

                    <!-- 日志列表 -->
                    <div class="p-6 max-h-[500px] overflow-y-auto" id="logContainer">
                        <!-- 日志条目将通过JS动态生成 -->
                    </div>

                    <!-- 统计信息 -->
                    <div class="bg-black text-white p-6 grid grid-cols-1 md:grid-cols-4 gap-6 border-t-4 border-black">
                        <div class="border-r border-white border-opacity-20 pr-6">
                            <div class="text-3xl font-arial-black mb-1" id="totalOps">0</div>
                            <div class="text-xs tracking-widest opacity-70">总操作数</div>
                        </div>
                        <div class="border-r border-white border-opacity-20 pr-6">
                            <div class="text-3xl font-arial-black mb-1 text-yellow-400" id="highRiskOps">0</div>
                            <div class="text-xs tracking-widest opacity-70">高风险操作</div>
                        </div>
                        <div class="border-r border-white border-opacity-20 pr-6">
                            <div class="text-3xl font-arial-black mb-1" id="lastLogin">--</div>
                            <div class="text-xs tracking-widest opacity-70">最后活动</div>
                        </div>
                        <div>
                            <button onclick="resetSystem()" class="w-full bg-white text-black border-2 border-white font-heavy py-3 hover:bg-black hover:text-white transition-colors duration-300 text-sm tracking-widest">
                                ← 返回登录
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 底部警告 -->
                <div class="mt-6 border-4 border-black bg-white p-6 flex items-start gap-4 hard-edge">
                    <div class="w-12 h-12 bg-black text-white flex items-center justify-center font-arial-black text-xl shrink-0">!</div>
                    <div class="flex-1">
                        <h4 class="font-heavy text-lg mb-2 tracking-widest">审计警告</h4>
                        <p class="text-sm leading-relaxed font-bold text-gray-700">
                            检测到该账号存在异常登入系统时间与系统日志篡改痕迹。部分操作记录显示与账号定位数据不符。建议立即冻结账号权限并启动深度检测程序。
                        </p>
                    </div>
                    <div class="hidden lg:block w-24 h-24 border-4 border-black rotate-12 opacity-20"></div>
                </div>
            </section>

        </div>
    </main>

    <!-- 底部 -->
    <footer class="bg-black text-white border-t-4 border-black mt-auto">
        <div class="main-container py-6 flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-4">
                <div class="w-6 h-6 bg-white rotate-45"></div>
                <span class="text-sm font-bold tracking-widest opacity-70">SBTP SYSTEM v2.5.1</span>
            </div>
            <div class="text-xs opacity-50 tracking-wider">
                南山市智慧商旅通 · 政务数据安全平台 · © 2025
            </div>
            <div class="flex items-center gap-2">
                <div class="w-2 h-2 bg-white rounded-full animate-pulse"></div>
                <span class="text-xs font-bold">系统运行中</span>
            </div>
        </div>
    </footer>

    <script>
        // 模拟账号数据库（基于剧情设定）
        const validAccounts = {
            '1990032478': {
                name: '佘噀噤.test',
                logs: [
                    { time: '2021-08-15 10:23:45', type: 'modify', content: '修改个人核心信息 - 姓名由"佘噀噤"变更为"宋绪静"', risk: 'low', ip: '192.168.1.201', location: '政务服务中心窗口' },
                    { time: '2021-08-16 09:12:30', type: 'modify', content: '系统判定原账号"佘噀噤.test"失效，标记为作废状态', risk: 'high', ip: '192.168.0.10', location: 'SBTP运维中心' },
                    { time: '2021-08-16 09:15:47', type: 'modify', content: '创建新系统账号"宋绪静.test"并绑定原ID卡号', risk: 'low', ip: '192.168.0.10', location: 'SBTP运维中心' },
                    { time: '2021-08-18 14:05:11', type: 'query', content: '提交新账号启用申请 [申请人：宋绪静（原佘噀噤）]', risk: 'low', ip: '192.168.1.201', location: '政务服务中心窗口' },
                    { time: '2021-08-20 08:30:22', type: 'modify', content: '审核通过新账号"宋绪静.test"启用申请，生效日期2021-08-21', risk: 'medium', ip: '192.168.0.15', location: 'SBTP审核部' },
                    { time: '2025-11-10 16:45:12', type: 'query', content: '查询用户行程数据 [林静怡]', risk: 'high', ip: '192.168.1.105', location: '远程终端' },
                    { time: '2025-11-10 21:47:33', type: 'modify', content: '篡改酒店房态数据 [国际酒店会场店]', risk: 'high', ip: '192.168.1.105', location: '远程终端' },
                    { time: '2025-11-10 21:52:18', type: 'query', content: '访问SBTP合作方接口 [提希丰会所]', risk: 'medium', ip: '192.168.1.105', location: '远程终端' },
                    { time: '2025-11-10 23:06:11', type: 'modify', content: '关闭会所走廊监控摄像头数据上传', risk: 'high', ip: '内网终端', location: '提希丰会所' },
                    { time: '2025-11-10 23:15:42', type: 'access', content: '生成维护工单 [VIP理疗舱3号室]', risk: 'high', ip: '内网终端', location: '提希丰会所' },
                    { time: '2025-11-11 02:30:15', type: 'query', content: '访问系统维护日志', risk: 'medium', ip: '192.168.1.105', location: '远程终端' }
                ]
            }
        };

        let currentLogs = [];
        let currentFilter = 'all';

        // 时间更新
        function updateTime() {
            const now = new Date();
            const timeStr = now.toTimeString().slice(0, 5);
            const timeEl = document.getElementById('currentTime');
            if (timeEl) timeEl.textContent = timeStr;
        }
        setInterval(updateTime, 1000);
        updateTime();

        // 登录处理
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const idCard = document.getElementById('idCard').value.trim();
            const accountName = document.getElementById('accountName').value.trim();
            const errorMsg = document.getElementById('errorMsg');
            
            // 验证ID卡号格式（10位数字）
            if (!/^\d{10}$/.test(idCard)) {
                showError('ID卡号必须为10位数字');
                return;
            }
            
            // 验证账号
            const account = validAccounts[idCard];
            if (account && account.name === accountName) {
                // 登录成功
                errorMsg.classList.add('hidden');
                showLogs(account);
            } else {
                // 登录失败
                showError('验证失败：ID卡号或账号名称不匹配');
            }
        });

        function showError(msg) {
            const errorMsg = document.getElementById('errorMsg');
            if (errorMsg) {
                errorMsg.querySelector('p').textContent = '⚠ ' + msg;
                errorMsg.classList.remove('hidden');
                setTimeout(() => {
                    errorMsg.classList.add('hidden');
                }, 3000);
            }
        }

        function showLogs(account) {
            const loginSection = document.getElementById('loginSection');
            const logSection = document.getElementById('logSection');
            const displayAccount = document.getElementById('displayAccount');
            const rightContent = document.getElementById('rightContent');
            const mainGrid = document.getElementById('mainGrid');
            const leftContent = document.getElementById('leftContent');
            
            if (loginSection) loginSection.classList.add('hidden');
            if (logSection) logSection.classList.remove('hidden');
            if (displayAccount) displayAccount.textContent = account.name;
            
            // 隐藏新闻和装饰区域，全屏显示日志
            if (rightContent) rightContent.classList.add('hidden');
            if (mainGrid) {
                mainGrid.classList.remove('lg:grid-cols-12');
                mainGrid.classList.add('lg:grid-cols-1');
            }
            if (leftContent) {
                leftContent.classList.remove('lg:col-span-8');
                leftContent.classList.add('lg:col-span-full');
            }
            
            currentLogs = account.logs;
            // 重新绑定过滤器事件
            bindFilterEvents();
            // 渲染日志
            renderLogs();
            updateStats();
            
            // 滚动到日志区域
            if (logSection) {
                logSection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function renderLogs() {
            const container = document.getElementById('logContainer');
            if (!container) return;
            container.innerHTML = '';
            
            const filtered = currentFilter === 'all' 
                ? currentLogs 
                : currentLogs.filter(log => log.type === currentFilter);
            
            if (filtered.length === 0) {
                container.innerHTML = '<div class="text-center py-12 opacity-50 font-heavy">暂无此类操作记录</div>';
                return;
            }
            
            filtered.forEach((log, index) => {
                const entry = document.createElement('div');
                entry.className = 'log-entry border-2 border-black mb-3 hover:bg-black hover:text-white transition-colors duration-300 group';
                entry.style.animationDelay = `${index * 0.05}s`;
                
                const typeConfig = {
                    query: { label: '查询', color: 'bg-blue-600', border: 'border-blue-600' },
                    modify: { label: '修改', color: 'bg-red-600', border: 'border-red-600' },
                    access: { label: '接入', color: 'bg-green-600', border: 'border-green-600' }
                };
                
                const config = typeConfig[log.type] || { label: '未知', color: 'bg-gray-600', border: 'border-gray-600' };
                
                const riskBadge = log.risk === 'high' 
                    ? '<span class="inline-block bg-red-600 text-white text-xs px-2 py-1 font-bold ml-2 group-hover:bg-white group-hover:text-red-600 transition-colors">高风险</span>' 
                    : log.risk === 'medium'
                    ? '<span class="inline-block border-2 border-current text-xs px-2 py-1 font-bold ml-2">中风险</span>'
                    : '<span class="inline-block bg-gray-200 text-gray-700 text-xs px-2 py-1 font-bold ml-2 group-hover:bg-white group-hover:text-gray-900">低风险</span>';
                
                entry.innerHTML = `
                    <div class="p-4 flex flex-col lg:flex-row lg:items-center justify-between gap-4">
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-3 mb-2 flex-wrap">
                                <span class="text-white text-xs font-bold px-3 py-1 ${config.color} group-hover:bg-white group-hover:text-black transition-colors">
                                    ${config.label}
                                </span>
                                <span class="font-mono text-sm opacity-60 font-bold">${log.time}</span>
                                ${riskBadge}
                            </div>
                            <p class="font-heavy text-base tracking-wide truncate">${log.content}</p>
                        </div>
                        <div class="flex items-center gap-6 text-xs font-mono opacity-60 border-t lg:border-t-0 lg:border-l-2 border-current pt-2 lg:pt-0 lg:pl-6 group-hover:opacity-100 transition-opacity">
                            <div>
                                <div class="font-bold mb-1">IP地址</div>
                                <div>${log.ip || '未知'}</div>
                            </div>
                            <div>
                                <div class="font-bold mb-1">物理位置</div>
                                <div>${log.location || '未知'}</div>
                            </div>
                            <div>
                                <div class="font-bold mb-1">节点</div>
                                <div>SBTP-NODE-04</div>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(entry);
            });
        }

        function updateStats() {
            const totalOps = document.getElementById('totalOps');
            const highRiskOps = document.getElementById('highRiskOps');
            const lastLogin = document.getElementById('lastLogin');
            
            if (totalOps) totalOps.textContent = currentLogs.length;
            if (highRiskOps) highRiskOps.textContent = currentLogs.filter(l => l.risk === 'high').length;
            if (lastLogin && currentLogs.length > 0) {
                lastLogin.textContent = currentLogs[currentLogs.length - 1].time.slice(11, 16);
            }
        }

        // 绑定过滤器事件（独立函数，确保登录后重新绑定）
        function bindFilterEvents() {
            const filterBtns = document.querySelectorAll('.filter-btn');
            filterBtns.forEach(btn => {
                // 先移除原有事件，避免重复绑定
                btn.removeEventListener('click', handleFilterClick);
                btn.addEventListener('click', handleFilterClick);
            });
        }

        // 过滤器点击处理函数
        function handleFilterClick() {
            const filterBtns = document.querySelectorAll('.filter-btn');
            filterBtns.forEach(b => {
                b.classList.remove('bg-black', 'text-white');
                b.classList.add('bg-white', 'text-black');
            });
            this.classList.remove('bg-white', 'text-black');
            this.classList.add('bg-black', 'text-white');
            
            currentFilter = this.dataset.filter;
            renderLogs();
        }

        function resetSystem() {
            const logSection = document.getElementById('logSection');
            const loginSection = document.getElementById('loginSection');
            const loginForm = document.getElementById('loginForm');
            const errorMsg = document.getElementById('errorMsg');
            const rightContent = document.getElementById('rightContent');
            const mainGrid = document.getElementById('mainGrid');
            const leftContent = document.getElementById('leftContent');
            
            if (logSection) logSection.classList.add('hidden');
            if (loginSection) loginSection.classList.remove('hidden');
            if (loginForm) loginForm.reset();
            if (errorMsg) errorMsg.classList.add('hidden');
            
            // 恢复布局（修复类名选择器错误）
            if (rightContent) rightContent.classList.remove('hidden');
            if (mainGrid) {
                mainGrid.classList.remove('lg:grid-cols-1');
                mainGrid.classList.add('lg:grid-cols-12');
            }
            if (leftContent) {
                leftContent.classList.remove('lg:col-span-full');
                leftContent.classList.add('lg:col-span-8');
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 输入框格式化
        document.getElementById('idCard')?.addEventListener('input', function(e) {
            e.target.value = e.target.value.replace(/\D/g, '').slice(0, 10);
        });

        // 初始绑定过滤器事件（防止未登录时点击）
        document.addEventListener('DOMContentLoaded', function() {
            bindFilterEvents();
        });
    </script>
</body>
</html>